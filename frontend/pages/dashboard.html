<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Dashboard | Cownect</title>
  <link rel="stylesheet" href="/styles/fonts.css" />
  <link rel="stylesheet" href="/styles/navbar.css" />
  <link rel="stylesheet" href="/styles/dashboard.css" />
  <link rel="stylesheet" href="/styles/footer.css" />

  <!-- Scripts -->
  <script src="/scripts/dashboard.js" defer></script>
  <script src="/scripts/navbar-component.js?v=3" defer></script>
  <script src="/scripts/navbar.js?v=3" defer></script>
  <script src="/scripts/footer.js" defer></script>
</head>

<body>
  <!-- Background blur decorations -->
  <div class="blur-decoration-left"></div>
  <div class="blur-decoration-right"></div>

  <!-- Navbar with enhanced profile circle -->

  <!-- Logout Button -->
  <div class="logout-button-container">
    <button class="logout-btn" onclick="logoutUser()" title="Logout">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
        <polyline points="16,17 21,12 16,7"/>
        <line x1="21" y1="12" x2="9" y2="12"/>
      </svg>
      Logout
    </button>
  </div>

  <!-- Dashboard Container -->
  <main class="dashboard-container">
    
    <!-- Enhanced User Profile Card - BASIC INFO ONLY -->
    <section class="user-profile-card">
      <!-- Profile Header -->
      <div class="profile-header">
        <div class="profile-image-container">
          <div class="profile-image" id="profileImage" onclick="document.getElementById('imageUpload').click()">
            <img id="profileImageDisplay" src="" alt="Profile" style="display: none; width: 100%; height: 100%; object-fit: cover; border-radius: 50%;">
            <span id="profileInitials">JD</span>
            <input type="file" id="imageUpload" accept="image/*" style="display: none;" onchange="handleImageUpload(event)">
            <div class="image-upload-overlay">
              <svg width="24" height="24" fill="white" viewBox="0 0 24 24">
                <path d="M12 2C13.1 2 14 2.9 14 4C14 5.1 13.1 6 12 6C10.9 6 10 5.1 10 4C10 2.9 10.9 2 12 2ZM21 9V7L15 1H5C3.89 1 3 1.89 3 3V21C3 22.1 3.89 23 5 23H19C20.1 23 21 22.1 21 21V9M19 9H14V4H19V9Z"/>
              </svg>
            </div>
          </div>
        </div>
        <div class="profile-basic-info">
          <div class="user-display-name" id="userDisplayName">UC Davis Student</div>
          <div class="user-email" id="userEmail">student@ucdavis.edu</div>
          <div class="profile-completion">
            <div class="completion-bar">
              <div class="completion-fill" id="completionFill" style="width: 0%"></div>
            </div>
            <span class="completion-text" id="completionText">0% Complete</span>
          </div>
        </div>
      </div>

      <!-- Simplified Profile Form - BASIC INFO ONLY -->
      <div class="profile-form" id="profileForm">
        
        <!-- Basic Information ONLY -->
        <div class="form-section">
          <h4>Basic Information</h4>
          
          <div class="form-row">
            <label for="profileName">Full Name *</label>
            <input type="text" id="profileName" placeholder="Your full name" maxlength="100">
          </div>

          <div class="form-row-group">
            <div class="form-row">
              <label for="profileYear">Year *</label>
              <select id="profileYear">
                <option value="">Select year</option>
                <option value="freshman">Freshman</option>
                <option value="sophomore">Sophomore</option>
                <option value="junior">Junior</option>
                <option value="senior">Senior</option>
                <option value="graduate">Graduate</option>
                <option value="phd">PhD</option>
                <option value="postdoc">Postdoc</option>
              </select>
            </div>

            <div class="form-row">
              <label for="profileMajor">Major *</label>
              <input type="text" id="profileMajor" placeholder="Computer Science" maxlength="100">
            </div>
          </div>

          <div class="form-row">
            <label for="profileBio">Bio *</label>
            <textarea id="profileBio" placeholder="Tell others about yourself..." maxlength="500" rows="3"></textarea>
          </div>

          <div class="form-row">
            <label for="profileHobbies">Interests & Hobbies</label>
            <input type="text" id="profileHobbies" placeholder="coding, music, hiking, photography" maxlength="300">
            <small>Separate with commas</small>
          </div>
        </div>

        <!-- Save Button -->
        <div class="profile-actions">
          <button class="save-profile-btn" id="saveProfileBtn" onclick="saveProfile()">Save Profile</button>
        </div>
      </div>
    </section>

    <!-- Saved Clubs Card -->
    <section class="saved-clubs-card">
      <h2>Saved Clubs</h2>
      <div class="saved-clubs-grid" id="savedClubsGrid">
        <div class="empty-state">
          <div class="empty-state-icon">ðŸ”–</div>
          <div class="empty-state-text">No saved clubs yet</div>
          <div class="empty-state-subtext">Explore tech clubs and bookmark your favorites!</div>
        </div>
      </div>
    </section>

    <!-- Upcoming Events Card -->
    <section class="upcoming-events-card">
      <h2>My Upcoming Events</h2>
      <div class="events-list" id="eventsList">
        <div class="empty-state">
          <div class="empty-state-icon">ðŸ“…</div>
          <div class="empty-state-text">No upcoming events</div>
          <div class="empty-state-subtext">Check back later for new tech events!</div>
        </div>
      </div>
    </section>

    <!-- Test Results Card -->
    <section class="test-results-card">
      <h2>Recent Test Results</h2>
      <div class="test-results-list" id="testResultsList">
        <div class="empty-state">
          <div class="empty-state-icon">ðŸ§ª</div>
          <div class="empty-state-text">No test results yet</div>
          <div class="empty-state-subtext">
            Take a niche quiz to discover your ideal career path!
            <br><br>
            <small style="color: #94a3b8; font-style: italic;">
              Click on any result to view detailed analysis
            </small>
          </div>
        </div>
      </div>
    </section>

    <!-- REMOVED: Potential Matches Card -->
    <!-- This section has been temporarily removed for future development -->

    <!-- REMOVED: Connections Card -->
    <!-- This section has been temporarily removed for future development -->

  </main>

  <!-- REMOVED: Matching Modal -->
  <!-- This modal has been temporarily removed for future development -->

  <!-- Loading State -->
  <div class="loading-overlay" id="loadingOverlay" style="display: none;">
    <div class="loading-spinner"></div>
    <div class="loading-text">Loading your dashboard...</div>
  </div>

  <script>
    // Global functions for HTML handlers
    function logoutUser() {
      if (confirm('Are you sure you want to logout?')) {
        window.location.href = '/logout';
      }
    }

    function goToDashboard() {
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    // Make functions global
    window.logoutUser = logoutUser;
    window.goToDashboard = goToDashboard;
  </script>

  <script>
    // Include the enhanced-results.css styles for modal content
    function loadModalResultsStyles() {
      if (document.getElementById('modal-results-styles')) return;

      const link = document.createElement('link');
      link.id = 'modal-results-styles';
      link.rel = 'stylesheet';
      link.href = '/styles/enhanced-results.css';
      document.head.appendChild(link);
      
      console.log('ðŸ“„ Enhanced results styles loaded for modal');
    }

    document.addEventListener('DOMContentLoaded', () => {
      loadModalResultsStyles();
    });
  </script>

  <script src="/scripts/navbar-profile.js" defer></script>

</body>

</html>